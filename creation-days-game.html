<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Creation Days Pattern Game</title>
<style>
  body {
    margin: 0;
    background: #050814;
    color: #f5f5f5;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 24px 10px;
  }
  .shell {
    width: 100%;
    max-width: 1100px;
    background: #101426;
    border-radius: 18px;
    box-shadow: 0 18px 40px rgba(0,0,0,0.7);
    padding: 18px 20px 24px;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }
  .top-bar h1 {
    margin: 0;
    font-size: 1.45rem;
    letter-spacing: 0.03em;
  }
  .back-link {
    font-size: 0.85rem;
    color: #9fb4ff;
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid #3a4a88;
  }
  .back-link:hover {
    background: #1a2345;
  }
  .howto {
    margin-top: 6px;
    font-size: 0.95rem;
    color: #d0d6ff;
  }
  .howto strong { color: #fff; }

  .top-board {
    margin-top: 16px;
    background: #151a34;
    border-radius: 14px;
    padding: 16px 16px 18px;
    border: 1px solid #262d4d;
  }
  .top-header {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 16px;
    font-size: 0.9rem;
    margin-bottom: 6px;
    color: #c4d4ff;
  }
  .top-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 16px;
    row-gap: 8px;
  }
  .slot {
    border-radius: 10px;
    border: 1px dashed #384166;
    min-height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px 8px;
    font-size: 0.9rem;
    text-align: center;
    color: #7c86b6;
  }
  .slot.filled {
    border-style: solid;
    border-color: #26a96c;
    background: #12252a;
    color: #e8fff2;
  }
  .mid-note {
    margin-top: 10px;
    text-align: center;
    font-size: 0.85rem;
    color: #aab7ff;
  }

  .middle-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-top: 18px;
  }
  .column {
    background: #151a34;
    border-radius: 14px;
    padding: 14px 12px 16px;
    border: 1px solid #262d4d;
  }
  .column h2 {
    font-size: 1.05rem;
    margin: 0 0 10px;
    text-align: center;
  }
  .cards {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .card {
    border-radius: 999px;
    padding: 9px 12px;
    background: #1c223e;
    border: 1px solid #323b63;
    font-size: 0.9rem;
    cursor: pointer;
    text-align: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease, border-color 0.08s ease;
  }
  .card:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.5);
  }
  .card.selected {
    background: #3655ff;
    border-color: #7fa3ff;
    box-shadow: 0 0 0 2px rgba(127,163,255,0.6);
  }
  .card.used {
    opacity: 0.3;
    pointer-events: none;
  }

  .feedback-row {
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
  }
  .feedback {
    min-height: 1.1em;
  }
  .feedback.good { color: #7dffb0; }
  .feedback.bad { color: #ff8a8a; }
  .score {
    color: #cfd7ff;
  }

  .bottom-area {
    margin-top: 18px;
    text-align: center;
  }
  .reveal-btn {
    padding: 9px 16px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    background: #444a6f;
    color: #e0e4ff;
    font-size: 0.95rem;
    transition: background 0.12s ease, transform 0.08s ease, box-shadow 0.08s ease;
  }
  .reveal-btn.enabled {
    background: #26a96c;
    color: #04120b;
  }
  .reveal-btn.enabled:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(38,169,108,0.7);
  }

  .reveal-panel {
    margin-top: 14px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    background: #141a2e;
    border-radius: 14px;
    padding: 14px 14px 16px;
    border: 1px solid #384166;
    opacity: 0;
    transform: translateY(6px);
    pointer-events: none;
    transition: opacity 0.25s ease-out, transform 0.25s ease-out;
  }
  .reveal-panel.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .day7-box {
    margin-bottom: 10px;
    background: linear-gradient(90deg, #fff89a, #ffe066);
    color: #111;
    padding: 10px 12px;
    border-radius: 10px;
    font-weight: bold;
    box-shadow: 0 0 18px rgba(255,224,102,0.9);
    animation: glow 1s ease-out 1;
  }
  @keyframes glow {
    0% { transform: scale(0.9); box-shadow: 0 0 0 rgba(255,224,102,0); }
    60% { transform: scale(1.04); box-shadow: 0 0 28px rgba(255,224,102,1); }
    100% { transform: scale(1); box-shadow: 0 0 18px rgba(255,224,102,0.9); }
  }
  .explanation {
    font-size: 0.9rem;
    line-height: 1.45;
    color: #e2e5ff;
    text-align: left;
  }

  @media (max-width: 800px) {
    .middle-layout { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
<div class="shell">
  <div class="top-bar">
    <h1>Creation Days Pattern Game</h1>
    <a class="back-link" href="index.html">‚¨Ö Back to Hub</a>
  </div>
  <div class="howto">
    üëâ <strong>How to Play:</strong> Click one card from the left and one from the right.
    If they belong together, they will jump up into the chart above. Rebuild all three pairs
    to uncover the hidden meaning of the story.
  </div>

  <!-- Top chart -->
  <div class="top-board">
    <div class="top-header">
      <div><strong>Forming Days</strong> (1‚Äì3)</div>
      <div><strong>Filling Days</strong> (4‚Äì6)</div>
    </div>
    <div class="top-grid">
      <div id="slot-forming-1" class="slot">‚Äî</div>
      <div id="slot-filling-1" class="slot">‚Äî</div>
      <div id="slot-forming-2" class="slot">‚Äî</div>
      <div id="slot-filling-2" class="slot">‚Äî</div>
      <div id="slot-forming-3" class="slot">‚Äî</div>
      <div id="slot-filling-3" class="slot">‚Äî</div>
    </div>
    <div class="mid-note">
      Once all three rows are filled, see if you can notice the pattern before you click the final reveal.
    </div>
  </div>

  <!-- Middle cards -->
  <div class="middle-layout">
    <div class="column">
      <h2>Forming Days</h2>
      <div id="forming-cards" class="cards"></div>
    </div>
    <div class="column">
      <h2>Filling Days</h2>
      <div id="filling-cards" class="cards"></div>
    </div>
  </div>

  <div class="feedback-row">
    <div id="feedback" class="feedback"></div>
    <div class="score">
      Matches: <span id="score">0</span> / 3
    </div>
  </div>

  <!-- Bottom reveal zone -->
  <div class="bottom-area">
    <button id="revealBtn" class="reveal-btn" disabled>Click Here for Final Reveal!</button>

    <div id="revealPanel" class="reveal-panel">
      <div class="day7-box">
        Day 7: ‚ÄúThen God blessed the seventh day and made it holy, because on it he rested from all the work of creating that he had done.‚Äù
      </div>
      <div class="explanation">
        Look at the pattern you just rebuilt: Day 1 matches Day 4, Day 2 matches Day 5, and Day 3 matches Day 6.
        Every ‚Äúforming day‚Äù on the left has a ‚Äúfilling day‚Äù partner on the right.
        But Day 7 stands alone with no matching pair.
        The mathematical structure of the story itself is preaching a message:
        <strong>the unmatched seventh day is the most important day in the whole week.</strong>
        Everything else is arranged in pairs so that the Sabbath can stand out as the holy climax.
      </div>
    </div>
  </div>
</div>

<script>
  const formingDays = [
    { id: 1, text: "Day 1: light" },
    { id: 2, text: "Day 2: world dome" },
    { id: 3, text: "Day 3: land+plants" }
  ];

  const fillingDays = [
    { id: 4, pair: 1, row: 1, text: "Day 4: heavenly bodies that make light" },
    { id: 5, pair: 2, row: 2, text: "Day 5: aquatic animals and birds that live near the dome" },
    { id: 6, pair: 3, row: 3, text: "Day 6: land animals+humans that live on the land and eat the plants" }
  ];

  const formingContainer = document.getElementById("forming-cards");
  const fillingContainer = document.getElementById("filling-cards");
  const feedbackEl = document.getElementById("feedback");
  const scoreEl = document.getElementById("score");
  const revealBtn = document.getElementById("revealBtn");
  const revealPanel = document.getElementById("revealPanel");

  let selectedForming = null;
  let selectedFilling = null;
  let matches = 0;

  function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function createCard(day, type) {
    const card = document.createElement("div");
    card.className = "card";
    card.textContent = day.text;
    card.dataset.type = type;
    card.dataset.id = day.id;
    if (type === "filling") {
      card.dataset.pair = day.pair;
      card.dataset.row = day.row;
    }

    card.addEventListener("click", () => handleCardClick(card));
    return card;
  }

  function renderCards() {
    formingContainer.innerHTML = "";
    fillingContainer.innerHTML = "";

    shuffle(formingDays).forEach(d => {
      formingContainer.appendChild(createCard(d, "forming"));
    });
    shuffle(fillingDays).forEach(d => {
      fillingContainer.appendChild(createCard(d, "filling"));
    });
  }

  function clearSelectionHighlight() {
    document.querySelectorAll(".card.selected").forEach(c => c.classList.remove("selected"));
  }

  function handleCardClick(card) {
    if (card.classList.contains("used")) return;

    const type = card.dataset.type;

    if (type === "forming") {
      if (selectedForming && selectedForming === card) {
        selectedForming = null;
        card.classList.remove("selected");
      } else {
        selectedForming = card;
        clearSelectionHighlight();
        card.classList.add("selected");
        if (selectedFilling) selectedFilling.classList.add("selected");
      }
    } else {
      if (selectedFilling && selectedFilling === card) {
        selectedFilling = null;
        card.classList.remove("selected");
      } else {
        selectedFilling = card;
        clearSelectionHighlight();
        card.classList.add("selected");
        if (selectedForming) selectedForming.classList.add("selected");
      }
    }

    if (selectedForming && selectedFilling) {
      checkMatch();
    }
  }

  function checkMatch() {
    const formingId = Number(selectedForming.dataset.id);
    const fillingPair = Number(selectedFilling.dataset.pair);
    const row = Number(selectedFilling.dataset.row);

    if (formingId === fillingPair) {
      feedbackEl.textContent = "Nice! Those two belong together.";
      feedbackEl.className = "feedback good";

      placeInRow(row, selectedForming.textContent, selectedFilling.textContent);

      selectedForming.classList.add("used");
      selectedFilling.classList.add("used");
      selectedForming.classList.remove("selected");
      selectedFilling.classList.remove("selected");

      selectedForming = null;
      selectedFilling = null;

      matches += 1;
      scoreEl.textContent = matches;

      if (matches === 3) {
        revealBtn.disabled = false;
        revealBtn.classList.add("enabled");
      }
    } else {
      feedbackEl.textContent = "Not quite. Match a forming day with its correct filling day.";
      feedbackEl.className = "feedback bad";

      selectedForming.classList.remove("selected");
      selectedFilling.classList.remove("selected");
      selectedForming = null;
      selectedFilling = null;
    }
  }

  function placeInRow(row, formingText, fillingText) {
    const formingSlot = document.getElementById("slot-forming-" + row);
    const fillingSlot = document.getElementById("slot-filling-" + row);

    formingSlot.textContent = formingText;
    fillingSlot.textContent = fillingText;

    formingSlot.classList.add("filled");
    fillingSlot.classList.add("filled");
  }

  revealBtn.addEventListener("click", () => {
    if (matches < 3) return;
    revealPanel.classList.add("visible");
    feedbackEl.textContent = "This structure is preaching with math.";
    feedbackEl.className = "feedback good";
  });

  renderCards();
</script>
</body>
</html>
